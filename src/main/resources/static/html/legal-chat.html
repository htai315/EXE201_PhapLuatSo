<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat AI Ph√°p Lu·∫≠t - AI Lu·∫≠t</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="icon" type="image/png" href="/img/Law.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/credits-counter.css">
    <link rel="stylesheet" href="/css/legal-chat.css">
    <link rel="stylesheet" href="/css/mobile-utils.css">
    <link rel="stylesheet" href="/css/toast-notification.css">

</head>

<body data-auth-required="true">
    <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
        <div class="container">
            <a class="navbar-brand" href="/index.html">
                <img src="/img/Law.png" alt="Logo">
                <span>Ph√°p Lu·∫≠t S·ªë</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto align-items-lg-center">
                    <li class="nav-item"><a class="nav-link" href="/index.html">Trang ch·ªß</a></li>
                    <li class="nav-item"><a class="nav-link" href="/html/about.html">V·ªÅ ch√∫ng t√¥i</a></li>
                    <li class="nav-item"><a class="nav-link active" href="/html/legal-chat.html">Chat AI</a></li>
                    <li class="nav-item"><a class="nav-link" href="/html/my-quizzes.html">B·ªô ƒë·ªÅ</a></li>
                    <li class="nav-item"><a class="nav-link" href="/html/guide.html">H∆∞·ªõng d·∫´n</a></li>
                    <li class="nav-item"><a class="nav-link" href="/html/contact.html">Li√™n h·ªá</a></li>
                    <li class="nav-item ms-lg-3 guest-only">
                        <a class="btn btn-outline-primary btn-sm px-3" href="/html/login.html">
                            <i class="bi bi-box-arrow-in-right me-1"></i>ƒêƒÉng Nh·∫≠p
                        </a>
                    </li>
                    <li class="nav-item ms-lg-2 guest-only">
                        <a class="btn btn-primary btn-sm px-3" href="/html/register.html">
                            <i class="bi bi-person-plus me-1"></i>ƒêƒÉng K√Ω
                        </a>
                    </li>
                    <li class="nav-item auth-only d-none">
                        <div id="chatCreditsCounter"></div>
                    </li>
                    <li class="nav-item dropdown ms-lg-3 auth-only d-none">
                        <a class="nav-link dropdown-toggle p-0" href="#" id="navbarDropdown" role="button"
                            data-bs-toggle="dropdown">
                            <img id="navUserAvatar" src="" alt="Avatar" class="rounded-circle"
                                style="width: 40px; height: 40px; object-fit: cover; border: 2px solid #1a4b84;">
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="/html/profile.html"><i class="bi bi-person me-2"></i>H·ªì
                                    s∆°</a></li>
                            <li><a class="dropdown-item" href="/html/payment-history.html"><i
                                        class="bi bi-clock-history me-2"></i>L·ªãch s·ª≠ thanh to√°n</a></li>
                            <li><a class="dropdown-item" href="/html/plans.html"><i
                                        class="bi bi-credit-card me-2"></i>N√¢ng c·∫•p</a></li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item" href="#" id="navLogoutBtn"><i
                                        class="bi bi-box-arrow-right me-2"></i>ƒêƒÉng xu·∫•t</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="chat-layout">
        <!-- Mobile Sidebar Overlay -->
        <div class="chat-sidebar-overlay" id="sidebarOverlay"></div>

        <!-- Mobile Sidebar Toggle Button -->
        <button class="chat-sidebar-toggle" id="sidebarToggle" aria-label="Toggle chat history">
            <i class="bi bi-clock-history"></i>
        </button>

        <!-- Sidebar -->
        <div class="chat-sidebar" id="chatSidebar">
            <div class="sidebar-header">
                <h2>üí¨ Chat AI Ph√°p Lu·∫≠t</h2>
                <p>Tr·ª£ l√Ω ph√°p l√Ω th√¥ng minh</p>
            </div>

            <div class="search-box">
                <i class="bi bi-search search-icon"></i>
                <input type="text" id="searchInput" placeholder="T√¨m ki·∫øm l·ªãch s·ª≠...">
                <i class="bi bi-x-circle-fill clear-search" id="clearSearch"></i>
            </div>

            <button class="new-chat-btn" onclick="startNewChat()">
                <i class="bi bi-plus-lg"></i>
                Chat m·ªõi
            </button>

            <div class="recent-chats" id="recentChats">
                <div class="empty-state">
                    <i class="bi bi-chat-dots"></i>
                    <p>ƒêang t·∫£i l·ªãch s·ª≠...</p>
                </div>
            </div>
        </div>

        <!-- Main Chat Area -->
        <div class="chat-main">
            <div class="chat-header">
                <h1>Tr·ª£ l√Ω AI Ph√°p Lu·∫≠t</h1>
            </div>

            <div class="chat-messages" id="chatMessages">
                <div class="message bot">
                    <div class="message-avatar">
                        ü§ñ
                    </div>
                    <div>
                        <div class="message-label">Tr·ª£ l√Ω AI</div>
                        <div class="message-content">
                            <p>Xin ch√†o! T√¥i l√† tr·ª£ l√Ω AI chuy√™n v·ªÅ ph√°p lu·∫≠t Vi·ªát Nam. B·∫°n c√≥ th·ªÉ h·ªèi t√¥i v·ªÅ c√°c v·∫•n ƒë·ªÅ
ph√°p l√Ω v√† t√¥i s·∫Ω tr·∫£ l·ªùi d·ª±a tr√™n c√°c vƒÉn b·∫£n ph√°p lu·∫≠t ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="chat-input-area">
                <div class="chat-input-container">
                    <form id="chatForm">
                        <div class="input-wrapper">
                            <textarea id="questionInput" placeholder="Nh·∫≠p c√¢u h·ªèi c·ªßa b·∫°n v·ªÅ ph√°p lu·∫≠t..." required
                                rows="1"></textarea>
                            <button class="send-btn" type="submit" id="sendBtn">
                                <i class="bi bi-send-fill"></i>
                            </button>
                        </div>
                    </form>

                    <div class="example-questions">
                        <button class="example-btn" onclick="askExample('Th·ªß t·ª•c ly h√¥n nh∆∞ th·∫ø n√†o?')">
                            üí° Th·ªß t·ª•c ly h√¥n nh∆∞ th·∫ø n√†o?
                        </button>
                        <button class="example-btn"
                            onclick="askExample('H·ª£p ƒë·ªìng mua b√°n ƒë·∫•t c√≥ c·∫ßn c√¥ng ch·ª©ng kh√¥ng?')">
                            üí° H·ª£p ƒë·ªìng mua b√°n ƒë·∫•t c·∫ßn c√¥ng ch·ª©ng?
                        </button>
                        <button class="example-btn" onclick="askExample('T√¥i b·ªã ƒë√°nh c√≥ th·ªÉ ki·ªán h√¨nh s·ª± kh√¥ng?')">
                            üí° B·ªã ƒë√°nh c√≥ th·ªÉ ki·ªán h√¨nh s·ª±?
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/scripts/token-manager.js"></script>
    <script src="/scripts/auth-guard.js"></script>
    <script src="/scripts/toast-notification.js"></script>
    <script src="/scripts/api-client.js"></script>
    <script src="/scripts/app-runtime.js"></script>
    <script src="/scripts/script.js"></script>
    <script src="/scripts/credits-counter.js"></script>

    <!-- Chat application modules (ES6 modules) -->
    <script type="module" src="/scripts/chat-main.js"></script>

    <!-- Fallback for onclick handlers (window.ChatApp is set in chat-main.js) -->
    <script>
        // Global function wrappers for onclick handlers in HTML
        // These delegate to window.ChatApp which is set after module loads
        function startNewChat() {
            if (window.ChatApp) window.ChatApp.startNewChat();
        }

        function askExample(question) {
            if (window.ChatApp) window.ChatApp.askExample(question);
        }
    </script>
</body>

</html>